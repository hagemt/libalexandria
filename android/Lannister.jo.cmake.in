#    This file is part of libalexandria.
#
#    libalexandria is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Lesser General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    libalexandria is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Lesser General Public License for more details.
#
#    You should have received a copy of the GNU Lesser General Public License
#    along with libalexandria.  If not, see <http://www.gnu.org/licenses/>.

## Android CMake settings for Lannister
set(PROJECT_LOG_TAG "lannister" CACHE STRING "App's log tag")
set(CMAKE_LIBRARY_ARCHITECTURE "arm" CACHE STRING "App's arch")

# Configure Java settings
set(JAVA_PREFIX "$ENV{HOME}/Downloads/Code/jdk1.8.0")
set(CMAKE_Java_ARCHIVE  "${JAVA_PREFIX}/bin/jar"   CACHE FILEPATH "Java archiver" FORCE)
set(CMAKE_Java_COMPILER "${JAVA_PREFIX}/bin/javac" CACHE FILEPATH "Java compiler" FORCE)
set(CMAKE_Java_RUNTIME  "${JAVA_PREFIX}/bin/java"  CACHE FILEPATH "Java runtime"  FORCE)

# Configure required properties
set(CMAKE_LIBRARY_ARCHITECTURE     "@ANDROID_APP_Lannister_ARCH@"                CACHE STRING   "" FORCE)
set(ANDROID_NDK                    "@ANDROID_APP_Lannister_NDK_DIR@"             CACHE PATH     "" FORCE)
set(ANDROID_NDK_TOOLCHAIN_ROOT     "@ANDROID_APP_Lannister_NDK_TOOLCHAIN_DIR@"   CACHE PATH     "" FORCE)
set(ANDROID_TOOLCHAIN_CMAKE_SCRIPT "@ANDROID_APP_Lannister_NDK_TOOLCHAIN_CMAKE@" CACHE FILEPATH "" FORCE)

## Android SDK settings for Lannister

# Configure a baseline API level
set(ANDROID_API_LEVEL "8" CACHE STRING "Target Android API")
# Configure platforms to support
option(ANDROID_TARGET_ARM  "Target ARM devices"  ON )
option(ANDROID_TARGET_MIPS "Target MIPS devices" OFF)
option(ANDROID_TARGET_X86  "Target x86 devices"  OFF)

## Cache a record (list) of toolchains that will be required

# TODO actually build for each option above... (not just arm)
if(ANDROID_TARGET_ARM)
  list(APPEND LA_ANDROID_TARGETS "arm")
endif(ANDROID_TARGET_ARM)
if(ANDROID_TARGET_MIPS)
  list(APPEND LA_ANDROID_TARGETS "mips")
endif(ANDROID_TARGET_MIPS)
if(ANDROID_TARGET_X86)
  list(APPEND LA_ANDROID_TARGETS "x86")
endif(ANDROID_TARGET_X86)
set(ANDROID_TARGETS "${LA_ANDROID_TARGETS}" CACHE STRING "Selected Android architectures" FORCE)
mark_as_advanced(ANDROID_TARGETS)
# Warn if all are disabled
if(NOT ANDROID_TARGETS)
  message(WARNING "You have disabled all supported Android architectures...")
  # TODO force ARM?
endif(NOT ANDROID_TARGETS)
